# 跨域

### CORS 如何跨域发送 Cookie ？

[参考](https://harttle.land/2016/12/28/cors-with-cookie.html)

**客户端方面**

- 设置`withCredentials`为`true`即可让该跨域请求携带 Cookie。 注意携带的是目标页面所在域的 Cookie。

**服务端方面**

- 设置[`Access-Control-Allow-Credentials`](https://www.w3.org/TR/cors/#access-control-allow-credentials-response-header)响应头为`true`， 即可允许跨域请求携带 Cookie。

- 除了`Access-Control-Allow-Credentials`之外，跨域发送 Cookie 还要求 `Access-Control-Allow-Origin`[不允许使用通配符](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)。 事实上不仅不允许通配符，而且[只能指定单一域名](https://www.w3.org/TR/2010/WD-cors-20100727/#resource-sharing-check0)
- 因此，服务器可能需要维护一个接受 Cookie 的 Origin 列表， 验证 `Origin` 请求头字段后直接将其设置为`Access-Control-Allow-Origin`的值

